# Voice In (Aqua Voice for Linux)

Linux環境で動作する、Aqua Voice風の音声入力ツールです。
`Left Alt` キーを押している間の音声を認識し、AI (Groq Whisper + Llama 3) で整形して、現在アクティブなウィンドウに入力します。

## 特徴
- **高精度な文字起こし**: Whisper Large v3 モデルを使用。
- **AIによる自動整形**: フィラー（えー、あのー）の除去、句読点の付与、適切なフォーマットへの変換。
- **辞書機能**: よく使う専門用語や誤認識しやすい単語を自動で置換します。
- **邪魔にならないUI**: 画面右下に小さなアイコンとして常駐します。

## 動作環境
- OS: Linux (Ubuntu/Debian系推奨)
- Python: 3.8以上
- GUI: X11推奨 (Waylandでは一部機能に制限がある場合があります)

## セットアップ手順

### 1. システムパッケージのインストール
必要なライブラリをインストールします。
```bash
sudo apt update
sudo apt install -y python3-pip python3-venv libportaudio2 libxcb-cursor0 libxcb-xinerama0
```

### 2. プロジェクトのセットアップ
```bash
# プロジェクトディレクトリへ移動
cd /path/to/voice-in

# 仮想環境の作成
python3 -m venv .venv

# Pythonライブラリのインストール
.venv/bin/pip install -r requirements.txt
```

### 3. APIキーの設定
プロジェクトの親ディレクトリまたは同階層に `.env` ファイルを作成し、Groq APIキーを設定します。
```bash
GROQ_API_KEY=gsk_xxxxxxxxxxxxxxxxxxxxxxxx
```

## 使い方

1. **起動**:
   ```bash
   .venv/bin/python main.py
   ```
   画面右下に正方形のアイコン（🎤）が表示されます。

2. **音声入力**:
   - 入力したいテキストボックス（エディタ、ブラウザなど）をクリックしてフォーカスします。
   - **`Left Alt` (左アルト) キーを押し続けます**。
   - アイコンが赤色（🎙️）になり、録音が始まります。マイクに向かって話してください。
   - 話し終わったらキーを離します。

3. **処理と入力**:
   - アイコンが黄色（⏳）になり、「Thinking...」状態になります。
   - 処理が完了すると、自動的にテキストが貼り付けられ、アイコンが一瞬チェックマーク（✅）になります。

## カスタマイズ

### 辞書登録
`main.py` 内の `DICTIONARY` 変数を編集することで、単語の置換ルールを追加できます。

```python
    # 辞書定義 (ユーザー定義の置換ルール)
    DICTIONARY = {
        "秋道中": "待機中",
        "詐称化": "最小化",
        # "誤認識される単語": "正しい単語", の形式で追加
    }
```

## トラブルシューティング
- **起動しない**: `.env` ファイルに正しいAPIキーがあるか確認してください。
- **反応しない**: `Left Alt` キーが正しく認識されていない可能性があります。ターミナルのログを確認してください。
- **貼り付けられない**: 一部のアプリではクリップボード貼り付けがブロックされることがあります。その場合は手動で `Ctrl+V` を押してください。
